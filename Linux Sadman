# Full DevOps Linux Web Server Setup for MERN Stack: From Scratch to Production (рж╕ржорзНржкрзВрж░рзНржг ржмрж╛ржВрж▓рж╛ржпрж╝ ржмрзНржпрж╛ржЦрзНржпрж╛ рж╕рж╣)

## рж╕рзВржЪрж┐ржкрждрзНрж░
1. ржкрж░рж┐ржЪрж┐рждрж┐
2. рж╕рж┐рж╕рзНржЯрзЗржо ржкрзНрж░рж╕рзНрждрзБрждрж┐
3. DevOps ржЗржЙржЬрж╛рж░ рждрзИрж░рж┐
4. SSH рж╕рзЗржЯржЖржк ржУ рж╕рзБрж░ржХрзНрж╖рж╛
5. ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи
6. Node.js ржУ MongoDB ржЗржирж╕рзНржЯрж▓рзЗрж╢ржи
7. Git рж╕рзЗржЯржЖржк ржУ ржкрзНрж░ржЬрзЗржХрзНржЯ ржХрзНрж▓рзЛржи
8. ржкрж░рж┐ржмрзЗрж╢ ржкрж░рж┐ржмрж░рзНрждржирж╢рзАрж▓рждрж╛ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи (.env)
9. ржЕрзНржпрж╛ржк рж▓рзЛржХрж╛рж▓ржнрж╛ржмрзЗ ржЪрж╛рж▓рж╛ржирзЛ ржУ ржкрж░рзАржХрзНрж╖рж╛
10. Nginx рж░рж┐ржнрж╛рж░рзНрж╕ ржкрзНрж░ржХрзНрж╕рж┐ рж╣рж┐рж╕рзЗржмрзЗ рж╕рзЗржЯржЖржк
11. PM2 ржжрзНржмрж╛рж░рж╛ ржкрзНрж░рж╕рзЗрж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
12. systemd рж╕рж╛рж░рзНржнрж┐рж╕ рждрзИрж░рж┐ (PM2 ржмрж┐ржХрж▓рзНржк)
13. MERN ржЕрзНржпрж╛ржк Dockerize ржХрж░рж╛
14. Docker Compose рж╕рзЗржЯржЖржк
15. Jenkins CI/CD ржкрж╛ржЗржкрж▓рж╛ржЗржи
16. Prometheus + Grafana ржоржирж┐ржЯрж░рж┐ржВ
17. ржмрзНржпрж╛ржХржЖржк ржХрзМрж╢рж▓
18. ржЙржкрж╕ржВрж╣рж╛рж░

---

## рзз. ржкрж░рж┐ржЪрж┐рждрж┐
ржПржЗ ржЧрж╛ржЗржбржЯрж┐ ржПржХржЯрж┐ рж╕ржорзНржкрзВрж░рзНржг MERN (MongoDB, Express.js, React.js, Node.js) ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж▓рж┐ржирж╛ржХрзНрж╕ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╢рзБрж░рзБ ржерзЗржХрзЗ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржкрж░рзНржпржирзНржд ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рж╛рж░ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ рж╢рзЗржЦрж╛ржмрзЗред ржПрждрзЗ DevOps ржкржжрзНржзрждрж┐, рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐, ржоржирж┐ржЯрж░рж┐ржВ, CI/CD рж╕рж╣ рж╕ржм ржХрж┐ржЫрзБрж░ ржХржорж╛ржирзНржб ржУ ржмрзНржпрж╛ржЦрзНржпрж╛ рж░ржпрж╝рзЗржЫрзЗред

---

## рзи. рж╕рж┐рж╕рзНржЯрзЗржо ржкрзНрж░рж╕рзНрждрзБрждрж┐
```bash
sudo apt update && sudo apt upgrade -y
```
- рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржкрзНржпрж╛ржХрзЗржЬ рждрж╛рж▓рж┐ржХрж╛ ржЖржкржбрзЗржЯ ржПржмржВ ржкрзБрж░ржирзЛ ржкрзНржпрж╛ржХрзЗржЬржЧрзБрж▓рзЛ рж╕рж░рзНржмрж╢рзЗрж╖ рж╕ржВрж╕рзНржХрж░ржгрзЗ ржЖржкржЧрзНрж░рзЗржб ржХрж░рзЗред

```bash
sudo apt install -y vim curl wget git net-tools unzip tar build-essential ufw
```
- рж╕рж╛ржзрж╛рж░ржгржнрж╛ржмрзЗ ржмрзНржпржмрж╣рзГржд рж╕ржм ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЯрзБрж▓ ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗред
  - `vim`: ржХрзЛржб ржПржбрж┐ржЯрж░
  - `curl` ржПржмржВ `wget`: ржУржпрж╝рзЗржм ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржбрж╛ржЙржирж▓рзЛржбрзЗрж░ ржЬржирзНржп
  - `git`: ржХрзЛржб ржнрж╛рж░рзНрж╕ржи ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рж╛рж░ ржЬржирзНржп
  - `net-tools`: ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржХржорж╛ржирзНржбрзЗрж░ ржЬржирзНржп
  - `unzip`, `tar`: ржЖрж░рзНржХрж╛ржЗржн ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯрзЗрж░ ржЬржирзНржп
  - `build-essential`: ржХржорзНржкрж╛ржЗрж▓рж╛рж░ ржЯрзБрж▓ржЪрзЗржЗржи
  - `ufw`: ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржЬржирзНржп

---

## рзй. DevOps ржЗржЙржЬрж╛рж░ рждрзИрж░рж┐
```bash
sudo adduser devops
```
- ржирждрзБржи ржЗржЙржЬрж╛рж░ `devops` рждрзИрж░рж┐ ржХрж░рзЗред

```bash
sudo usermod -aG sudo devops
```
- `devops` ржЗржЙржЬрж╛рж░ржХрзЗ sudo (ржЕрзНржпрж╛ржбржорж┐ржи) ржЧрзНрж░рзБржкрзЗ ржпрзБржХрзНржд ржХрж░рзЗред

```bash
su - devops
```
- ржирждрзБржи ржЗржЙржЬрж╛рж░рзЗ рж╕рзНржпрзБржЗржЪ ржХрж░рзЗред

---

## рзк. SSH рж╕рзЗржЯржЖржк ржУ рж╕рзБрж░ржХрзНрж╖рж╛
```bash
ssh-keygen
```
- SSH ржХрзА ржкрзЗржпрж╝рж╛рж░ рждрзИрж░рж┐ ржХрж░рзЗред

```bash
ssh-copy-id devops@your_server_ip
```
- ржкрж╛ржмрж▓рж┐ржХ ржХрзА рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝ ржпрж╛рждрзЗ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржЫрж╛ржбрж╝рж╛ржЗ рж▓ржЧржЗржи ржХрж░рж╛ ржпрж╛ржпрж╝ред

```bash
sudo vim /etc/ssh/sshd_config
```
- SSH ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржлрж╛ржЗрж▓ ржЦрзБрж▓рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржжрзБржЯрж┐ рж▓рж╛ржЗржи ржЖржкржбрзЗржЯ ржХрж░рзБржи:
  - `PermitRootLogin no`: рж░рзБржЯ ржЗржЙржЬрж╛рж░ SSH ржерзЗржХрзЗ ржирж┐рж╖рж┐ржжрзНржз
  - `PasswordAuthentication no`: рж╢рзБржзрзБржорж╛рждрзНрж░ ржХрзА-ржПрж░ ржорж╛ржзрзНржпржорзЗ рж▓ржЧржЗржи

```bash
sudo systemctl restart ssh
```
- SSH рж╕рж╛рж░рзНржнрж┐рж╕ рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ ржХрж░рзЗ ржирждрзБржи ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржХрж╛рж░рзНржпржХрж░ ржХрж░рзЗред

---

## рзл. ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи
```bash
sudo apt install ufw -y
```
- ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓ ржЯрзБрж▓ UFW ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗред

```bash
sudo ufw allow OpenSSH
sudo ufw allow http
sudo ufw allow https
```
- SSH, HTTP ржУ HTTPS ржкрзЛрж░рзНржЯ ржЦрзБрж▓рзЗ ржжрзЗржпрж╝ред

```bash
sudo ufw enable
sudo ufw status
```
- ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓ ржЪрж╛рж▓рзБ ржХрж░рзЗ ржПржмржВ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржжрзЗржЦрзЗред

---

## рзм. Node.js ржПржмржВ MongoDB ржЗржирж╕рзНржЯрж▓рзЗрж╢ржи
```bash
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs
```
- Node.js ржнрж╛рж░рзНрж╕ржи 18 ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗред

```bash
sudo npm install -g pm2
```
- PM2 ржЧрзНрж▓рзЛржмрж╛рж▓рж┐ ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗ, ржПржЯрж┐ Node.js ржЕрзНржпрж╛ржк ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ред

```bash
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/6.0 multiverse" | \
  sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list
sudo apt update
sudo apt install -y mongodb-org
```
- MongoDB 6.0 ржПрж░ рж╕рзЛрж░рзНрж╕ ржпрзБржХрзНржд ржХрж░рзЗ ржПржмржВ MongoDB ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗред

```bash
sudo systemctl start mongod
sudo systemctl enable mongod
```
- MongoDB рж╕рж╛рж░рзНржнрж┐рж╕ ржЪрж╛рж▓рзБ ржПржмржВ рж╕рж┐рж╕рзНржЯрзЗржо ржмрзБржЯрзЗ ржЪрж╛рж▓рзБ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп рж╕рзЗржЯ ржХрж░рзЗред

---

## рзн. Git рж╕рзЗржЯржЖржк ржУ ржкрзНрж░ржЬрзЗржХрзНржЯ ржХрзНрж▓рзЛржи
```bash
sudo apt install git -y
git clone https://github.com/your-username/mern-app.git
cd mern-app
```
- ржЧрж┐ржЯ ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗ ржПржмржВ ржЖржкржирж╛рж░ MERN ржкрзНрж░ржЬрзЗржХрзНржЯ ржХрзНрж▓рзЛржи ржХрж░рзЗ рж▓рзЛржХрж╛рж▓ ржорзЗрж╢рж┐ржирзЗ ржирж┐ржпрж╝рзЗ ржЖрж╕рзЗред

---

## рзо. ржкрж░рж┐ржмрзЗрж╢ ржкрж░рж┐ржмрж░рзНрждржирж╢рзАрж▓рждрж╛ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи (.env)
```bash
cp .env.example .env
vim .env
```
- `.env` ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЗ ржПржмржВ рж╕рзЗржЦрж╛ржирзЗ DB URI, JWT_SECRET, PORT ржЗрждрзНржпрж╛ржжрж┐ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ред

---

## рзп. ржЕрзНржпрж╛ржк рж▓рзЛржХрж╛рж▓ржнрж╛ржмрзЗ ржЪрж╛рж▓рж╛ржирзЛ ржУ ржкрж░рзАржХрзНрж╖рж╛
```bash
cd backend
npm install
npm run dev
```
- ржмрзНржпрж╛ржХржПржирзНржб ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ ржЗржирзНрж╕ржЯрж▓ ржХрж░рзЗ ржПржмржВ рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ ржХрж░рзЗред

```bash
cd ../frontend
npm install
npm run build
```
- React ржЕрзНржпрж╛ржк ржЗржирзНрж╕ржЯрж▓ ржХрж░рзЗ ржПржмржВ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржмрж┐рж▓рзНржб рждрзИрж░рж┐ ржХрж░рзЗред

---

## рззрзж. Nginx рж░рж┐ржнрж╛рж░рзНрж╕ ржкрзНрж░ржХрзНрж╕рж┐ рж╣рж┐рж╕рзЗржмрзЗ рж╕рзЗржЯржЖржк
```bash
sudo apt install nginx -y
sudo vim /etc/nginx/sites-available/mern
```
- Nginx ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗ ржПржмржВ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЗред

**ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржмрзНрж▓ржХ ржмрзНржпрж╛ржЦрзНржпрж╛ рж╕рж╣**
```nginx
server {
    listen 80;
    server_name your_domain_or_ip;

    location /api/ {
        proxy_pass http://localhost:5000/; # ржмрзНржпрж╛ржХржПржирзНржб API ржЯрзНрж░рж╛ржлрж┐ржХ ржлрж░ржУржпрж╝рж╛рж░рзНржб ржХрж░рзЗ
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    location / {
        root /home/devops/mern-app/frontend/build; # ржлрзНрж░ржирзНржЯржПржирзНржб ржмрж┐рж▓рзНржб ржлрзЛрж▓рзНржбрж╛рж░
        index index.html;
        try_files $uri /index.html;
    }
}
```

```bash
sudo ln -s /etc/nginx/sites-available/mern /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```
- рж╕рж┐ржорж▓рж┐ржВржХ ржХрж░рзЗ, ржХржиржлрж┐ржЧ ржЯрзЗрж╕рзНржЯ ржХрж░рзЗ ржПржмржВ Nginx рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ ржХрж░рзЗред

---

## рззрзз. PM2 ржжрзНржмрж╛рж░рж╛ ржкрзНрж░рж╕рзЗрж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
```bash
cd backend
```
- `cd backend`: ржмрзНржпрж╛ржХржПржирзНржб ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржкрзНрж░ржмрзЗрж╢ ржХрж░рзБржиред

```bash
npm install
```
- `npm install`: рж╕ржм ржкрзНрж░рзЯрзЛржЬржирзАрзЯ Node.js ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗ `package.json` ржерзЗржХрзЗред

```bash
npm run build
```
- (ржпржжрж┐ applicable рж╣рзЯ) ржЕрзНржпрж╛ржк ржмрж┐рж▓рзНржб ржХрж░рзЗтАФReact ржирзЯ, Express.js рж╣рж▓рзЗ ржПржЯрж┐ ржжрж░ржХрж╛рж░ ржирзЗржЗред

```bash
pm2 start server.js --name backend
```
- `pm2` ржжрж┐рзЯрзЗ `server.js` ржлрж╛ржЗрж▓ ржЪрж╛рж▓рзБ ржХрж░рж╛ рж╣рзЯ ржПржмржВ `backend` ржирж╛ржорзЗ ржПржХржЯрж┐ ржкрзНрж░рж╕рзЗрж╕ рж╣рж┐рж╕рзЗржмрзЗ ржЪрж╛рж▓рж╛ржирзЛ рж╣рзЯред

```bash
pm2 startup
```
- рж╕рж╛рж░рзНржнрж╛рж░ рж░рж┐ржмрзБржЯрзЗрж░ ржкрж░ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ ржЕрзНржпрж╛ржк ржЪрж╛рж▓рзБ ржХрж░рж╛рж░ ржЬржирзНржп PM2 ржЗржирж┐рж╢рж┐рзЯрж╛рж▓рж╛ржЗржЬ ржХрж░рзЗред

```bash
pm2 save
```
- ржмрж░рзНрждржорж╛ржирзЗ ржЪрж╛рж▓рзБ ржХрж░рж╛ ржЕрзНржпрж╛ржкржЧрзБрж▓рзЛ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ, ржпрзЗржи рж░рж┐ржмрзБржЯрзЗрж░ ржкрж░ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ рж╕рзНржЯрж╛рж░рзНржЯ рж╣рзЯред

---

## рззрзи. systemd рж╕рж╛рж░рзНржнрж┐рж╕ рждрзИрж░рж┐ (PM2-ржПрж░ ржмрж┐ржХрж▓рзНржк)
```bash
sudo vim /etc/systemd/system/mern-backend.service
```
- ржирждрзБржи рж╕рж╛рж░рзНржнрж┐рж╕ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржЬржирзНржп systemd ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯред

```ini
[Unit]
Description=MERN Backend Service
After=network.target

[Service]
User=devops
WorkingDirectory=/home/devops/mern-app/backend
ExecStart=/usr/bin/node server.js
Restart=always

[Install]
WantedBy=multi-user.target
```
- ржПржЗ рж╕рж╛рж░рзНржнрж┐рж╕ржЯрж┐:
  - `network.target` ржПрж░ ржкрж░рзЗ ржЪрж╛рж▓рзБ рж╣ржмрзЗ
  - `devops` ржЗржЙржЬрж╛рж░ рж╣рж┐рж╕рзЗржмрзЗ ржЪрж▓ржмрзЗ
  - `/home/devops/mern-app/backend` ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рждрзЗ `server.js` ржЪрж╛рж▓рж╛ржмрзЗ
  - рж╕рж╛рж░рзНржнрж┐рж╕ ржХрзНрж░рзНржпрж╛рж╢ ржХрж░рж▓рзЗ ржЖржмрж╛рж░ ржЪрж╛рж▓рзБ рж╣ржмрзЗ

```bash
sudo systemctl daemon-reload
```
- systemd ржХрзЗ ржирждрзБржи рж╕рж╛рж░рзНржнрж┐рж╕ ржлрж╛ржЗрж▓ рж╕ржорзНржкрж░рзНржХрзЗ ржЕржмрж╣рж┐ржд ржХрж░рзЗред

```bash
sudo systemctl enable mern-backend
```
- рж╕рж╛рж░рзНржнрж┐рж╕ржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржо ржмрзБржЯрзЗрж░ рж╕ржорзЯ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ ржЪрж╛рж▓рзБ рж╣ржмрзЗред

```bash
sudo systemctl start mern-backend
```
- рж╕рж╛рж░рзНржнрж┐рж╕ржЯрж┐ ржПржЦржиржЗ ржЪрж╛рж▓рзБ ржХрж░рзЗред

---

## рззрзй. MERN ржЕрзНржпрж╛ржк Dockerize ржХрж░рж╛
**backend/Dockerfile**
```Dockerfile
FROM node:18
WORKDIR /app
COPY . .
RUN npm install
EXPOSE 5000
CMD ["node", "server.js"]
```
- ржПржХржЯрж┐ ржмрзНржпрж╛ржХржПржирзНржб ржбржХрж╛рж░ ржЗржорзЗржЬ рждрзИрж░рж┐ ржХрж░рзЗ ржпрж╛ `server.js` ржЪрж╛рж▓рж╛рзЯред

**frontend/Dockerfile**
```Dockerfile
FROM node:18 AS build
WORKDIR /app
COPY . .
RUN npm install && npm run build

FROM nginx:alpine
COPY --from=build /app/build /usr/share/nginx/html
```
- ржкрзНрж░ржержорзЗ React ржЕрзНржпрж╛ржк ржмрж┐рж▓рзНржб ржХрж░рзЗ, рждрж╛рж░ржкрж░ `nginx` ржжрж┐ржпрж╝рзЗ рж╕рж╛рж░рзНржн ржХрж░рзЗред

---

## рззрзк. Docker Compose рж╕рзЗржЯржЖржк
**docker-compose.yml**
```yaml
version: '3'
services:
  backend:
    build: ./backend
    ports:
      - "5000:5000"
    environment:
      - DB_URI=your_db_url
    depends_on:
      - mongo

  frontend:
    build: ./frontend
    ports:
      - "80:80"

  mongo:
    image: mongo
    ports:
      - "27017:27017"
```
- ржПржЗ ржлрж╛ржЗрж▓рзЗ backend, frontend ржУ mongo рждрж┐ржиржЯрж┐ рж╕рж╛рж░рзНржнрж┐рж╕ ржбрж┐ржлрж╛ржЗржи ржХрж░рж╛ рж╣рзЯред

```bash
docker compose up -d
```
- рж╕ржм ржХржиржЯрзЗржЗржирж╛рж░ ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржбрзЗ ржЪрж╛рж▓рзБ ржХрж░рзЗред

---

## рззрзл. Jenkins CI/CD ржкрж╛ржЗржкрж▓рж╛ржЗржи
```bash
sudo apt install openjdk-17-jdk -y
```
- Jenkins ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп Java ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗред

```bash
wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -
echo "deb https://pkg.jenkins.io/debian binary/" | sudo tee /etc/apt/sources.list.d/jenkins.list
```
- Jenkins-ржПрж░ рж░рзЗржкрзЛржЬрж┐ржЯрж░рж┐ ржпрзБржХрзНржд ржХрж░рзЗред

```bash
sudo apt update
sudo apt install jenkins -y
```
- Jenkins ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗред

```bash
sudo systemctl start jenkins
sudo systemctl enable jenkins
```
- рж╕рж╛рж░рзНржнрж┐рж╕ ржЪрж╛рж▓рзБ ржПржмржВ ржмрзБржЯрзЗ ржЕржЯрзЛ рж╕рзНржЯрж╛рж░рзНржЯ рж╕рзЗржЯ ржХрж░рзЗред

```bash
sudo cat /var/lib/jenkins/secrets/initialAdminPassword
```
- ржкрзНрж░ржержо рж▓ржЧржЗржирзЗрж░ ржЬржирзНржп ржЕрзНржпрж╛ржбржорж┐ржи ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрзЗржЦрж╛рзЯред

---

## рззрзм. Prometheus + Grafana ржоржирж┐ржЯрж░рж┐ржВ
**docker-compose.monitor.yml**
```yaml
version: '3'
services:
  prometheus:
    image: prom/prometheus
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    ports:
      - "9090:9090"

  grafana:
    image: grafana/grafana
    ports:
      - "3000:3000"
```
- Prometheus ржбрзЗржЯрж╛ ржХрж╛рж▓рзЗржХрзНржЯ ржХрж░рзЗ, Grafana рждрж╛ ржнрж┐ржЬрзНржпрзБржпрж╝рж╛рж▓ ржХрж░рзЗред

**prometheus.yml**
```yaml
global:
  scrape_interval: 15s
scrape_configs:
  - job_name: 'mern-backend'
    static_configs:
      - targets: ['localhost:5000']
```
- ржкрзНрж░рждрж┐ рззрзл рж╕рзЗржХрзЗржирзНржбрзЗ backend рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржорзЗржЯрзНрж░рж┐ржХ ржХрж╛рж▓рзЗржХрзНржЯ ржХрж░рзЗред

```bash
docker compose -f docker-compose.monitor.yml up -d
```
- ржоржирж┐ржЯрж░рж┐ржВ рж╕рж╛рж░рзНржнрж┐рж╕ржЧрзБрж▓рзЛ ржЪрж╛рж▓рзБ ржХрж░рзЗред

---

## рззрзн. ржмрзНржпрж╛ржХржЖржк ржХрзМрж╢рж▓
```bash
sudo crontab -e
```
- ржХрзНрж░ржиржЬржм ржПржбрж┐ржЯ ржХрж░рждрзЗред

```cron
0 2 * * * tar -czvf /home/devops/mern_backup_$(date +\%F).tar.gz /home/devops/mern-app
```
- ржкрзНрж░рждрж┐ржжрж┐ржи ржнрзЛрж░ рзиржЯрж╛ржпрж╝ ржЕрзНржпрж╛ржк ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ ржмрзНржпрж╛ржХржЖржк ржирзЗржУржпрж╝рж╛ рж╣ржмрзЗред

---
# Red Hat Linux Administration Command Guide 



---

## ЁЯФР рзз. ржЗржЙржЬрж╛рж░ ржПржмржВ ржЧрзНрж░рзБржк ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
```bash
useradd devops
```
- ржирждрзБржи ржЗржЙржЬрж╛рж░ `devops` рждрзИрж░рж┐ ржХрж░рзЗред

```bash
passwd devops
```
- `devops` ржЗржЙржЬрж╛рж░рзЗрж░ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж╕рзЗржЯ ржХрж░рзЗред

```bash
groupadd developers
```
- ржирждрзБржи ржЧрзНрж░рзБржк `developers` рждрзИрж░рж┐ ржХрж░рзЗред

```bash
usermod -aG developers devops
```
- `devops` ржЗржЙржЬрж╛рж░ржХрзЗ `developers` ржЧрзНрж░рзБржкрзЗ ржпрзЛржЧ ржХрж░рзЗред

```bash
id devops
```
- ржЗржЙржЬрж╛рж░рзЗрж░ UID, GID, ржЧрзНрж░рзБржкржЧрзБрж▓рзЛ ржжрзЗржЦрж╛рзЯред

---

## ЁЯУБ рзи. ржлрж╛ржЗрж▓ ржкрж╛рж░ржорж┐рж╢ржи ржУ ржорж╛рж▓рж┐ржХрж╛ржирж╛
```bash
chmod 755 script.sh
```
- `script.sh` ржлрж╛ржЗрж▓рзЗрж░ ржкрж╛рж░ржорж┐рж╢ржи 755 ржХрж░рзЗ: ржорж╛рж▓рж┐ржХрзЗрж░ ржкрзВрж░рзНржг ржЕржзрж┐ржХрж╛рж░, ржЕржирзНржпржжрзЗрж░ рж░рж┐ржб ржУ ржПржХрзНрж╕рж┐ржХрж┐ржЙржЯред

```bash
chown devops:developers script.sh
```
- ржлрж╛ржЗрж▓рзЗрж░ ржорж╛рж▓рж┐ржХ `devops` ржПржмржВ ржЧрзНрж░рзБржк `developers` рж╣рж┐рж╕рзЗржмрзЗ рж╕рзЗржЯ ржХрж░рзЗред

```bash
ls -l
```
- ржлрж╛ржЗрж▓рзЗрж░ ржкрж╛рж░ржорж┐рж╢ржи, ржорж╛рж▓рж┐ржХрж╛ржирж╛ ржУ рж╕рж╛ржЗржЬрж╕рж╣ рждржерзНржп ржжрзЗржЦрж╛рзЯред

---

## ЁЯУж рзй. ржкрзНржпрж╛ржХрзЗржЬ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ (DNF/YUM)
```bash
dnf install httpd -y
```
- Apache HTTPD рж╕рж╛рж░рзНржнрж╛рж░ ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗред

```bash
dnf remove httpd -y
```
- HTTPD рж░рж┐ржорзБржн ржХрж░рзЗред

```bash
dnf update -y
```
- рж╕ржХрж▓ ржкрзНржпрж╛ржХрзЗржЬ ржЖржкржбрзЗржЯ ржХрж░рзЗред

```bash
dnf list installed | grep nginx
```
- ржЗржирж╕рзНржЯрж▓ржХрзГржд `nginx` рж╕ржорзНржкрж░рзНржХрж┐ржд ржкрзНржпрж╛ржХрзЗржЬ ржжрзЗржЦрж╛рзЯред

---

## ЁЯз▒ рзк. рж╕рж╛рж░рзНржнрж┐рж╕ ржУ ржкрзНрж░рж╕рзЗрж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ (systemd)
```bash
systemctl start nginx
```
- `nginx` рж╕рж╛рж░рзНржнрж┐рж╕ ржЪрж╛рж▓рзБ ржХрж░рзЗред

```bash
systemctl enable nginx
```
- ржмрзБржЯрзЗрж░ рж╕ржорзЯ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ ржЪрж╛рж▓рзБ рж╣ржмрзЗред

```bash
systemctl status nginx
```
- `nginx` рж╕рж╛рж░рзНржнрж┐рж╕рзЗрж░ ржмрж░рзНрждржорж╛ржи ржЕржмрж╕рзНржерж╛ ржжрзЗржЦрж╛рзЯред

```bash
systemctl stop nginx
```
- рж╕рж╛рж░рзНржнрж┐рж╕ ржмржирзНржз ржХрж░рзЗред

---

## ЁЯМР рзл. ржирзЗржЯржУрзЯрж╛рж░рзНржХрж┐ржВ
```bash
ip a
```
- рж╕ржорж╕рзНржд ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕рзЗрж░ IP ржарж┐ржХрж╛ржирж╛ ржжрзЗржЦрж╛рзЯред

```bash
nmcli device status
```
- NetworkManager ржПрж░ ржорж╛ржзрзНржпржорзЗ ржбрж┐ржнрж╛ржЗрж╕ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржжрзЗржЦрж╛рзЯред

```bash
ping google.com
```
- ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржХрж╛ржирзЗржХрзНржЯрж┐ржнрж┐ржЯрж┐ ржЯрзЗрж╕рзНржЯ ржХрж░рзЗред

---

## ЁЯФе рзм. ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓ (firewalld)
```bash
firewall-cmd --state
```
- ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓ ржЪрж╛рж▓рзБ ржЖржЫрзЗ ржХрж┐ржирж╛ ржжрзЗржЦрж╛рзЯред

```bash
firewall-cmd --add-service=http --permanent
firewall-cmd --reload
```
- HTTP рж╕рж╛рж░рзНржнрж┐рж╕ ржЕржирзБржорзЛржжржи ржХрж░рзЗ ржПржмржВ ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓ ржкрзБржирж░рж╛рзЯ рж▓рзЛржб ржХрж░рзЗред

---

## ЁЯУБ рзн. ржбрж┐рж╕рзНржХ, ржкрж╛рж░рзНржЯрж┐рж╢ржи ржПржмржВ ржлрж╛ржЗрж▓рж╕рж┐рж╕рзНржЯрзЗржо
```bash
lsblk
```
- рж╕ржВржпрзБржХрзНржд рж╕рзНржЯрзЛрж░рзЗржЬ ржбрж┐ржнрж╛ржЗрж╕ ржжрзЗржЦрж╛рзЯред

```bash
fdisk /dev/sdb
```
- `sdb` ржбрж┐ржнрж╛ржЗрж╕рзЗ ржирждрзБржи ржкрж╛рж░рзНржЯрж┐рж╢ржи рждрзИрж░рж┐ ржХрж░рзЗред

```bash
mkfs.ext4 /dev/sdb1
```
- ржирждрзБржи ржкрж╛рж░рзНржЯрж┐рж╢ржирзЗ EXT4 ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо рждрзИрж░рж┐ ржХрж░рзЗред

```bash
mount /dev/sdb1 /mnt/data
```
- ржбрж┐ржнрж╛ржЗрж╕ `/mnt/data` рждрзЗ ржорж╛ржЙржирзНржЯ ржХрж░рзЗред

```bash
echo '/dev/sdb1 /mnt/data ext4 defaults 0 0' >> /etc/fstab
```
- рж░рж┐ржмрзБржЯрзЗрж░ ржкрж░ ржЕржЯрзЛ-ржорж╛ржЙржирзНржЯрзЗрж░ ржЬржирзНржп fstab ржП ржПржирзНржЯрзНрж░рж┐ ржпрзЛржЧ ржХрж░рзЗред

---

## ЁЯФБ рзо. рж╢рж┐ржбрж┐ржЙрж▓рж┐ржВ: CronJobs
```bash
crontab -e
```
- ржмрж░рзНрждржорж╛ржи ржЗржЙржЬрж╛рж░рзЗрж░ ржЬржирзНржп cron ржХрж╛ржЬ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗред

```cron
0 2 * * * /home/devops/backup.sh
```
- ржкрзНрж░рждрж┐ржжрж┐ржи ржнрзЛрж░ рзиржЯрж╛ржпрж╝ `backup.sh` рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржЪрж╛рж▓рж╛рзЯред

```bash
systemctl status crond
```
- `crond` рж╕рж╛рж░рзНржнрж┐рж╕ ржЪрж╛рж▓рзБ ржЖржЫрзЗ ржХрж┐ржирж╛ ржжрзЗржЦрзЗред

---

## ЁЯЫбя╕П рзп. SELinux
```bash
getenforce
```
- SELinux enforced, permissive ржмрж╛ disabled ржЖржЫрзЗ ржХрж┐ржирж╛ ржЬрж╛ржирж╛рзЯред

```bash
setenforce 0
```
- SELinux `Permissive` ржорзЛржбрзЗ ржирж┐рзЯрзЗ ржЖрж╕рзЗ (ржЕрж╕рзНржерж╛рзЯрзА)ред

```bash
vim /etc/selinux/config
```
- ржкрж╛рж░рзНржорж╛ржирзЗржирзНржЯ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржЬржирзНржп SELinux ржлрж╛ржЗрж▓ ржПржбрж┐ржЯ ржХрж░рзЗред

---

## ЁЯУд рззрзж. SSH ржПржмржВ SCP
```bash
ssh user@server
```
- рж░рж┐ржорзЛржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗ SSH рж╕ржВржпрзЛржЧ ржХрж░рзЗред

```bash
scp file.txt user@192.168.1.10:/tmp/
```
- рж▓рзЛржХрж╛рж▓ ржлрж╛ржЗрж▓ рж░рж┐ржорзЛржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржХржкрж┐ ржХрж░рзЗред

```bash
ssh-keygen
ssh-copy-id user@server
```
- ржкрж╛рж╕ржУрзЯрж╛рж░рзНржбржмрж┐рж╣рзАржи рж▓ржЧржЗржи рж╕рзЗржЯржЖржкрзЗрж░ ржЬржирзНржп SSH key рждрзИрж░рж┐ ржУ ржХржкрж┐ ржХрж░рж╛ рж╣рзЯред

---

## ЁЯУЛ рззрзз. рж▓ржЧ ржУ ржоржирж┐ржЯрж░рж┐ржВ
```bash
tail -f /var/log/messages
```
- рж░рж┐рзЯрзЗрж▓ржЯрж╛ржЗржорзЗ рж╕рж┐рж╕рзНржЯрзЗржо рж▓ржЧ ржжрзЗржЦрж╛ред

```bash
journalctl -xe
```
- systemd ржнрж┐рждрзНрждрж┐ржХ рж▓ржЧ ржжрзЗржЦрж╛рж░ ржЬржирзНржпред

```bash
journalctl -u sshd
```
- ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕рж╛рж░рзНржнрж┐рж╕рзЗрж░ рж▓ржЧ ржжрзЗржЦрж╛ред

---

## ЁЯУЬ рззрзи. Bash Shell Script
```bash
#!/bin/bash
echo "Hello Red Hat Admin!"
```
- ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг рж╢рзЗрж▓ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржпрж╛ Hello ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛рзЯред

```bash
chmod +x hello.sh
./hello.sh
```
- рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржПржХрзНрж╕рж┐ржХрж┐ржЙржЯрзЗржмрж▓ ржХрж░рзЗ ржПржмржВ ржЪрж╛рж▓рж╛рзЯред

# Red Hat Linux Administration Command Guide (ржмрж╛ржВрж▓рж╛ржпрж╝ рж╕ржорзНржкрзВрж░рзНржг ржмрзНржпрж╛ржЦрзНржпрж╛ рж╕рж╣)

ржПржЗ ржЧрж╛ржЗржбржЯрж┐ Red Hat System Administration (RHCSA / RHCE) ржПржмржВ DevOps ржкрзНрж░рж╕рзНрждрзБрждрж┐рж░ ржЬржирзНржп рж╕ржХрж▓ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рж▓рж┐ржирж╛ржХрзНрж╕ ржХржорж╛ржирзНржб ржмрзНржпрж╛ржЦрзНржпрж╛ рж╕рж╣ ржЙржкрж╕рзНржерж╛ржкржи ржХрж░рзЗржЫрзЗред ржПрждрзЗ ржЗржЙржЬрж╛рж░ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ, ржлрж╛ржЗрж▓ ржкрж╛рж░ржорж┐рж╢ржи, рж╕рж┐рж╕рзНржЯрзЗржо рж╕рзЗржЯржЖржк, ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓, cron, SELinux, systemctl, disk management, scripting ржПржмржВ ржЖрж░рзЛ ржЕржирзЗржХ ржмрж┐рж╖ржпрж╝ ржХржнрж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред

---

[ржЖржЧрзЗрж░ рж╕ржХрж▓ ржмрж┐ржнрж╛ржЧ ржЕржкрж░рж┐ржмрж░рзНрждрж┐ржд ржерж╛ржХржмрзЗ]

---

## ЁЯзк рззрзй. ржкрзНрж░рж╕рзЗрж╕ ржУ RAM ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛
```bash
top
```
- рж░рж┐ржпрж╝рзЗрж▓ржЯрж╛ржЗржорзЗ CPU ржУ ржорзЗржорж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржжрзЗржЦрж╛ржпрж╝ред

```bash
ps aux
```
- рж╕ржорж╕рзНржд ржЪрж▓ржорж╛ржи ржкрзНрж░рж╕рзЗрж╕ рждрж╛рж▓рж┐ржХрж╛ ржжрзЗржЦрж╛ржпрж╝ред

```bash
kill -9 PID
```
- ржирж┐рж░рзНржжрж┐рж╖рзНржЯ PID рж╕ржорзНржмрж▓рж┐ржд ржкрзНрж░рж╕рзЗрж╕ ржЬрзЛрж░ржкрзВрж░рзНржмржХ ржмржирзНржз ржХрж░рзЗред

```bash
free -h
```
- RAM ржПржмржВ Swap ржмрзНржпржмрж╣рж╛рж░ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗред

```bash
df -h
```
- ржбрж┐рж╕рзНржХрзЗрж░ ржорзЛржЯ ржУ ржмрзНржпржмрж╣рзГржд рж╕рж╛ржЗржЬ ржжрзЗржЦрж╛ржпрж╝ред

```bash
du -sh /home/devops
```
- ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рж░ рж╕рзНржкрзЗрж╕ ржЗржЙрж╕рзЗржЬ ржжрзЗржЦрж╛ржпрж╝ред

---

## ЁЯзо рззрзк. ржЧрзНрж░рж╛ржм ржУ ржмрзБржЯ ржкрзНрж░рж╕рзЗрж╕
```bash
grub2-mkconfig -o /boot/grub2/grub.cfg
```
- ржирждрзБржи ржЧрзНрж░рж╛ржм ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рждрзИрж░рж┐ ржХрж░рзЗред

```bash
systemctl get-default
```
- ржмрж░рзНрждржорж╛ржи ржЯрж╛рж░рзНржЧрзЗржЯ (рж░рж╛ржи рж▓рзЗржнрзЗрж▓) ржжрзЗржЦрж╛ржпрж╝ред

```bash
systemctl set-default multi-user.target
```
- CLI ржнрж┐рждрзНрждрж┐ржХ рж░рж╛ржирж▓рзЗржнрзЗрж▓ ржбрж┐ржлрж▓рзНржЯ рж╣рж┐рж╕рзЗржмрзЗ рж╕рзЗржЯ ржХрж░рзЗред

---

## ЁЯУО рззрзл. ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи (static IP)
```bash
nmcli connection show
```
- рж╕ржХрзНрж░рж┐ржпрж╝ ржХрж╛ржирзЗржХрж╢ржи рждрж╛рж▓рж┐ржХрж╛ ржжрзЗржЦрж╛ржпрж╝ред

```bash
nmcli connection modify ens33 ipv4.addresses 192.168.1.100/24
nmcli connection modify ens33 ipv4.gateway 192.168.1.1
nmcli connection modify ens33 ipv4.dns 8.8.8.8
nmcli connection modify ens33 ipv4.method manual
nmcli connection up ens33
```
- `ens33` ржЗржирзНржЯрж╛рж░ржлрзЗрж╕рзЗ рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ ржЖржЗржкрж┐ ржЕрзНржпрж╛рж╕рж╛ржЗржи ржХрж░рзЗ ржУ ржХрж╛ржирзЗржХрж╢ржи рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ ржХрж░рзЗред

---

## ЁЯз╛ рззрзм. ржЖрж░рзНржХрж╛ржЗржн ржУ ржХржоржкрзНрж░рзЗрж╢ржи
```bash
tar -cvf backup.tar /home/devops
```
- `backup.tar` ржирж╛ржорзЗрж░ ржЯрж╛рж░ ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЗред

```bash
tar -xvf backup.tar
```
- ржЯрж╛рж░ ржлрж╛ржЗрж▓ extract ржХрж░рзЗред

```bash
gzip backup.tar
```
- gzip ржХржоржкрзНрж░рзЗрж╢ржи ржХрж░рзЗред

```bash
gunzip backup.tar.gz
```
- gzip ржлрж╛ржЗрж▓ extract ржХрж░рзЗред

---









